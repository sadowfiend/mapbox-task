(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{7854:function(e,t,n){Promise.resolve().then(n.bind(n,5654))},5654:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),o=n(2265),i=n(7719),l=n.n(i);l().accessToken="pk.eyJ1Ijoic2luZ3VsYXJpdHlsYWIiLCJhIjoiY2x6b2JmZGNhMHY0eTJrcXcxOGp0eDluNiJ9.tOMt_XF278-jrGovF9MsAw";var s=()=>{let e=(0,o.useRef)(null),t=(0,o.useRef)(null),n=(0,o.useRef)(null),i=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(e.current&&!t.current){t.current=new(l()).Map({container:e.current,style:"mapbox://styles/mapbox/streets-v11",center:[-74.006,40.7128],zoom:12,attributionControl:!1});let r=t.current,o=new(l()).AttributionControl({compact:!0});r.addControl(o,"bottom-right"),r.on("load",()=>{r.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["get","height"],"fill-extrusion-base":["get","min_height"],"fill-extrusion-opacity":.6}});let t=document.createElement("div");t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.zIndex="1",t.style.backgroundColor="white",t.style.padding="10px",t.style.borderRadius="5px",t.style.boxShadow="0 2px 6px rgba(0, 0, 0, 0.3)",t.style.fontFamily="Arial, sans-serif",t.style.maxWidth="200px",t.style.display="none",t.innerHTML='\n                    <button id="popup-close" style="position: absolute; top: 5px; right: 5px; border: none; background: none; font-size: 16px; cursor: pointer;">\n                        &times;\n                    </button>\n                    <div id="popup-content">\n                        <!-- Содержимое попапа будет вставлено динамически -->\n                    </div>\n                ',e.current&&e.current.appendChild(t),n.current=t;let o=document.getElementById("popup-close");o&&o.addEventListener("click",()=>{n.current&&(n.current.style.display="none"),null!==i.current&&(s(i.current),i.current=null)})});let s=e=>{r.setPaintProperty("3d-buildings","fill-extrusion-color","#aaa"),r.setPaintProperty("3d-buildings","fill-extrusion-height",["get","height"])},u=e=>{r.setPaintProperty("3d-buildings","fill-extrusion-height",["case",["==",["id"],e],["+",["get","height"],50],["get","height"]])};r.on("click","3d-buildings",e=>{let t=r.queryRenderedFeatures(e.point,{layers:["3d-buildings"]});if(!t.length){n.current&&(n.current.style.display="none"),i.current=null;return}let o=t[0],l=o.id;if(console.log("Feature object:",o),!l){console.log("Feature does not have a valid ID");return}if(!o.properties){console.log("Feature properties are null");return}let c=o.properties.name||"N/A",a=o.properties.address||"N/A",d=o.properties.type||"N/A",p=o.properties.height||"N/A";if(console.log("Building data:",{name:c,address:a,type:d,height:p}),i.current===l){s(l),i.current=null,n.current&&(n.current.style.display="none");return}if(null!==i.current&&s(i.current),r.setPaintProperty("3d-buildings","fill-extrusion-color",["case",["==",["id"],l],"#f00","#aaa"]),i.current=l,n.current){let e=document.getElementById("popup-content");e&&(e.innerHTML='\n                            <div>\n                                <strong style="font-size: 16px; color: #333;">Building Info</strong><br />\n                                <div style="margin-top: 10px;">\n                                    <strong style="color: #555;">Type:</strong> '.concat(d,'<br />\n                                    <strong style="color: #555;">Name:</strong> ').concat(c,'<br />\n                                    <strong style="color: #555;">Address:</strong> ').concat(a,'<br />\n                                    <strong style="color: #555;">Height:</strong> ').concat(p," meters\n                                </div>\n                            </div>\n                        ")),n.current.style.display="block"}u(l)}),r.on("click",e=>{r.queryRenderedFeatures(e.point,{layers:["3d-buildings"]}).length||(n.current&&(n.current.style.display="none"),i.current=null)})}return()=>{t.current&&(t.current.remove(),t.current=null)}},[]),(0,r.jsx)("div",{ref:e,className:"map-container",style:{height:"100vh",width:"100%",position:"relative"}})};function u(){return(0,r.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center",children:(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(s,{})})})}},357:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:l}catch(e){n=l}}();var u=[],c=!1,a=-1;function d(){c&&r&&(c=!1,r.length?u=r.concat(u):a=-1,u.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(r=u,u=[];++a<t;)r&&r[a].run();a=-1,t=u.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===l||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}},l=!0;try{t[e](i,i.exports,r),l=!1}finally{l&&delete n[e]}return i.exports}r.ab="//";var o=r(229);e.exports=o}()}},function(e){e.O(0,[415,971,23,744],function(){return e(e.s=7854)}),_N_E=e.O()}]);